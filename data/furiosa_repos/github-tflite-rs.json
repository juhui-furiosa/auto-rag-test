{
  "name": "tflite-rs",
  "url": "https://github.com/furiosa-ai/tflite-rs",
  "visibility": "public",
  "readme": {
    "title": "Rust bindings for TensorFlow Lite",
    "sections": [
      {
        "heading": "Rust bindings for TensorFlow Lite",
        "text": "This crates provides TensorFlow Lite APIs.\nPlease read the\nAPI documentation on docs.rs",
        "children": [
          {
            "heading": "Using the interpreter from a model file",
            "text": "The following example shows how to use the TensorFlow Lite interpreter when provided a TensorFlow Lite FlatBuffer file.\nThe example also demonstrates how to run inference on input data.\nuse\nstd\n::\nfs\n::\n{\nself\n,\nFile\n}\n;\nuse\nstd\n::\nio\n::\nRead\n;\nuse\ntflite\n::\nops\n::\nbuiltin\n::\nBuiltinOpResolver\n;\nuse\ntflite\n::\n{\nFlatBufferModel\n,\nInterpreterBuilder\n,\nResult\n}\n;\nfn\ntest_mnist\n(\nmodel\n:\n&\nFlatBufferModel\n)\n->\nResult\n<\n(\n)\n>\n{\nlet\nresolver =\nBuiltinOpResolver\n::\ndefault\n(\n)\n;\nlet\nbuilder =\nInterpreterBuilder\n::\nnew\n(\nmodel\n,\n&\nresolver\n)\n?\n;\nlet\nmut\ninterpreter = builder\n.\nbuild\n(\n)\n?\n;\ninterpreter\n.\nallocate_tensors\n(\n)\n?\n;\nlet\ninputs = interpreter\n.\ninputs\n(\n)\n.\nto_vec\n(\n)\n;\nassert_eq\n!\n(\ninputs\n.\nlen\n(\n)\n,\n1\n)\n;\nlet\ninput_index = inputs\n[\n0\n]\n;\nlet\noutputs = interpreter\n.\noutputs\n(\n)\n.\nto_vec\n(\n)\n;\nassert_eq\n!\n(\noutputs\n.\nlen\n(\n)\n,\n1\n)\n;\nlet\noutput_index = outputs\n[\n0\n]\n;\nlet\ninput_tensor = interpreter\n.\ntensor_info\n(\ninput_index\n)\n.\nunwrap\n(\n)\n;\nassert_eq\n!\n(\ninput_tensor\n.\ndims\n,\nvec!\n[\n1\n,\n28\n,\n28\n,\n1\n]\n)\n;\nlet\noutput_tensor = interpreter\n.\ntensor_info\n(\noutput_index\n)\n.\nunwrap\n(\n)\n;\nassert_eq\n!\n(\noutput_tensor\n.\ndims\n,\nvec!\n[\n1\n,\n10\n]\n)\n;\nlet\nmut\ninput_file =\nFile\n::\nopen\n(\n\"data/mnist10.bin\"\n)\n?\n;\nfor\ni\nin\n0\n..\n10\n{\ninput_file\n.\nread_exact\n(\ninterpreter\n.\ntensor_data_mut\n(\ninput_index\n)\n?\n)\n?\n;\ninterpreter\n.\ninvoke\n(\n)\n?\n;\nlet\noutput\n:\n&\n[\nu8\n]\n= interpreter\n.\ntensor_data\n(\noutput_index\n)\n?\n;\nlet\nguess = output\n.\niter\n(\n)\n.\nenumerate\n(\n)\n.\nmax_by\n(\n|x\n,\ny| x\n.\n1\n.\ncmp\n(\ny\n.\n1\n)\n)\n.\nunwrap\n(\n)\n.\n0\n;\nprintln\n!\n(\n\"{}: {:?}\"\n,\ni\n,\noutput\n)\n;\nassert_eq\n!\n(\ni\n,\nguess\n)\n;\n}\nOk\n(\n(\n)\n)\n}\n#\n[\ntest\n]\nfn\nmobilenetv1_mnist\n(\n)\n->\nResult\n<\n(\n)\n>\n{\ntest_mnist\n(\n&\nFlatBufferModel\n::\nbuild_from_file\n(\n\"data/MNISTnet_uint8_quant.tflite\"\n)\n?\n)\n?\n;\nlet\nbuf = fs\n::\nread\n(\n\"data/MNISTnet_uint8_quant.tflite\"\n)\n?\n;\ntest_mnist\n(\n&\nFlatBufferModel\n::\nbuild_from_buffer\n(\nbuf\n)\n?\n)\n}\n#\n[\ntest\n]\nfn\nmobilenetv2_mnist\n(\n)\n->\nResult\n<\n(\n)\n>\n{\ntest_mnist\n(\n&\nFlatBufferModel\n::\nbuild_from_file\n(\n\"data/MNISTnet_v2_uint8_quant.tflite\"\n)\n?\n)\n?\n;\nlet\nbuf = fs\n::\nread\n(\n\"data/MNISTnet_v2_uint8_quant.tflite\"\n)\n?\n;\ntest_mnist\n(\n&\nFlatBufferModel\n::\nbuild_from_buffer\n(\nbuf\n)\n?\n)\n}",
            "children": []
          },
          {
            "heading": "Using the FlatBuffers model APIs",
            "text": "This crate also provides a limited set of FlatBuffers model APIs.\nuse\ntflite\n::\nmodel\n::\nstl\n::\nvector\n::\n{\nVectorInsert\n,\nVectorErase\n,\nVectorSlice\n}\n;\nuse\ntflite\n::\nmodel\n::\n{\nBuiltinOperator\n,\nBuiltinOptions\n,\nModel\n,\nSoftmaxOptionsT\n}\n;\n#\n[\ntest\n]\nfn\nflatbuffer_model_apis_inspect\n(\n)\n{\nlet\nmodel =\nModel\n::\nfrom_file\n(\n\"data/MNISTnet_uint8_quant.tflite\"\n)\n.\nunwrap\n(\n)\n;\nassert_eq\n!\n(\nmodel\n.\nversion\n,\n3\n)\n;\nassert_eq\n!\n(\nmodel\n.\noperator_codes\n.\nsize\n(\n)\n,\n5\n)\n;\nassert_eq\n!\n(\nmodel\n.\nsubgraphs\n.\nsize\n(\n)\n,\n1\n)\n;\nassert_eq\n!\n(\nmodel\n.\nbuffers\n.\nsize\n(\n)\n,\n24\n)\n;\nassert_eq\n!\n(\nmodel\n.\ndescription\n.\nc_str\n(\n)\n.\nto_string_lossy\n(\n)\n,\n\"TOCO Converted.\"\n)\n;\nassert_eq\n!\n(\nmodel\n.\noperator_codes\n[\n0\n]\n.\nbuiltin_code\n,\nBuiltinOperator\n::\nBuiltinOperator_AVERAGE_POOL_2D\n)\n;\nassert_eq\n!\n(\nmodel\n.\noperator_codes\n.\niter\n(\n)\n.\nmap\n(\n|oc| oc\n.\nbuiltin_code\n)\n.\ncollect\n::\n<\nVec\n<_>>\n(\n)\n,\nvec!\n[\nBuiltinOperator\n::\nBuiltinOperator_AVERAGE_POOL_2D\n,\nBuiltinOperator\n::\nBuiltinOperator_CONV_2D\n,\nBuiltinOperator\n::\nBuiltinOperator_DEPTHWISE_CONV_2D\n,\nBuiltinOperator\n::\nBuiltinOperator_SOFTMAX\n,\nBuiltinOperator\n::\nBuiltinOperator_RESHAPE\n]\n)\n;\nlet\nsubgraph =\n&\nmodel\n.\nsubgraphs\n[\n0\n]\n;\nassert_eq\n!\n(\nsubgraph\n.\ntensors\n.\nsize\n(\n)\n,\n23\n)\n;\nassert_eq\n!\n(\nsubgraph\n.\noperators\n.\nsize\n(\n)\n,\n9\n)\n;\nassert_eq\n!\n(\nsubgraph\n.\ninputs\n.\nas_slice\n(\n)\n,\n&\n[\n22\n]\n)\n;\nassert_eq\n!\n(\nsubgraph\n.\noutputs\n.\nas_slice\n(\n)\n,\n&\n[\n21\n]\n)\n;\nlet\nsoftmax = subgraph\n.\noperators\n.\niter\n(\n)\n.\nposition\n(\n|op|\n{\nmodel\n.\noperator_codes\n[\nop\n.\nopcode_index\nas\nusize\n]\n.\nbuiltin_code\n==\nBuiltinOperator\n::\nBuiltinOperator_SOFTMAX\n}\n)\n.\nunwrap\n(\n)\n;\nassert_eq\n!\n(\nsubgraph\n.\noperators\n[\nsoftmax\n]\n.\ninputs\n.\nas_slice\n(\n)\n,\n&\n[\n4\n]\n)\n;\nassert_eq\n!\n(\nsubgraph\n.\noperators\n[\nsoftmax\n]\n.\noutputs\n.\nas_slice\n(\n)\n,\n&\n[\n21\n]\n)\n;\nassert_eq\n!\n(\nsubgraph\n.\noperators\n[\nsoftmax\n]\n.\nbuiltin_options\n.\ntype_\n,\nBuiltinOptions\n::\nBuiltinOptions_SoftmaxOptions\n)\n;\nlet\nsoftmax_options\n:\n&\nSoftmaxOptionsT\n= subgraph\n.\noperators\n[\nsoftmax\n]\n.\nbuiltin_options\n.\nas_ref\n(\n)\n;\nassert_eq\n!\n(\nsoftmax_options\n.\nbeta\n,\n1.\n)\n;\n}\n#\n[\ntest\n]\nfn\nflatbuffer_model_apis_mutate\n(\n)\n{\nlet\nmut\nmodel =\nModel\n::\nfrom_file\n(\n\"data/MNISTnet_uint8_quant.tflite\"\n)\n.\nunwrap\n(\n)\n;\nmodel\n.\nversion\n=\n2\n;\nmodel\n.\noperator_codes\n.\nerase\n(\n4\n)\n;\nmodel\n.\nbuffers\n.\nerase\n(\n22\n)\n;\nmodel\n.\nbuffers\n.\nerase\n(\n23\n)\n;\nmodel\n.\ndescription\n.\nassign\n(\nCString\n::\nnew\n(\n\"flatbuffer\"\n)\n.\nunwrap\n(\n)\n)\n;\n{\nlet\nsubgraph =\n&\nmut\nmodel\n.\nsubgraphs\n[\n0\n]\n;\nsubgraph\n.\ninputs\n.\nerase\n(\n0\n)\n;\nsubgraph\n.\noutputs\n.\nassign\n(\nvec\n!\n[\n1\n,\n2\n,\n3\n,\n4\n]\n)\n;\n}\nlet\nmodel_buffer = model\n.\nto_buffer\n(\n)\n;\nlet\nmodel =\nModel\n::\nfrom_buffer\n(\n&\nmodel_buffer\n)\n;\nassert_eq\n!\n(\nmodel\n.\nversion\n,\n2\n)\n;\nassert_eq\n!\n(\nmodel\n.\noperator_codes\n.\nsize\n(\n)\n,\n4\n)\n;\nassert_eq\n!\n(\nmodel\n.\nsubgraphs\n.\nsize\n(\n)\n,\n1\n)\n;\nassert_eq\n!\n(\nmodel\n.\nbuffers\n.\nsize\n(\n)\n,\n22\n)\n;\nassert_eq\n!\n(\nmodel\n.\ndescription\n.\nc_str\n(\n)\n.\nto_string_lossy\n(\n)\n,\n\"flatbuffer\"\n)\n;\nlet\nsubgraph =\n&\nmodel\n.\nsubgraphs\n[\n0\n]\n;\nassert_eq\n!\n(\nsubgraph\n.\ntensors\n.\nsize\n(\n)\n,\n23\n)\n;\nassert_eq\n!\n(\nsubgraph\n.\noperators\n.\nsize\n(\n)\n,\n9\n)\n;\nassert\n!\n(\nsubgraph\n.\ninputs\n.\nas_slice\n(\n)\n.\nis_empty\n(\n)\n)\n;\nassert_eq\n!\n(\nsubgraph\n.\noutputs\n.\nas_slice\n(\n)\n,\n&\n[\n1\n,\n2\n,\n3\n,\n4\n]\n)\n;\n}",
            "children": []
          }
        ]
      }
    ]
  },
  "metadata": {
    "description": null,
    "license": null,
    "stars": 0,
    "forks": 0,
    "topics": [],
    "last_updated": "2025-11-14T00:41:00.827720Z"
  }
}